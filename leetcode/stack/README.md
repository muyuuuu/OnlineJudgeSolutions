# 题解

1. 第 739 题，每日温度。暴力破解会超时，单调栈的应用，如果栈不为空且当前元素大于栈顶元素，弹栈，栈顶元素对应的索引计算天数。否则，压如当前温度的索引。
2. 第 895 题，最大频率栈。空间换时间。一个 map 记录元素出现的次数，一个 map 记录出现次数对应哪些元素。弹栈时，先按频率弹，弹空了，频率自减。频率相同，按元素到来顺序弹出，所以第二个 map 的 value 用 stack 实现。
3. 第 1190 题，**华为机试原题**，反转每对括号间的子串。遇到左括号，说明左括号前面的内容保留不动，压入之前的内容，单词清空；遇到右括号，说明和左括号之间的内容要反转，反转单词，和之前保留不动的内容相加；否则，做默认的字符相加。
4. 第 227 题，基本计算器 II。最简单的栈的应用，先压入一个正数符号。而后每次遇到数字，如果是加减，直接压如；如果是乘除，就和栈顶元素运算。数字比符号向后多一个。
5. 第 316 题，去除重复字母。[一份不错的题解](https://leetcode-cn.com/problems/remove-duplicate-letters/solution/you-qian-ru-shen-dan-diao-zhan-si-lu-qu-chu-zhong-/)。使用 bool 数组查看是否重复，计数数组表示元素数量，决定是否弹栈。这应该是比较难的了。
6. 第 20 题，有效的括号。用栈，考虑好各种极端情况，`], ())), (]])`，尽力设计好没有漏洞的程序。
7. 第 155 题，最小栈。两个栈，一个栈压元素，另一个栈压栈顶与最小值中最小的一个。弹栈时，两个栈都弹栈。获取最小元素时，返回另一个栈的栈顶元素。
8. 面试题，03.02，栈的最小值。和第 155 题一样。
9. 第 1441 题，用栈操作构建数组。栈的基础应用，可以不用题上的第二个参数 n。设立游标，遍历 target，如果不相等，游标自增，push和pop，游标相等，push。
10. 第 1544 题，整理字符串。栈不空，先判断当前元素和即将压入的元素是否符合条件，如果符合，弹栈。不符合，压入。
11. 面试题 03.04，化栈为队。意思是用栈实现队列，直接用双端队列或向量。
12. 第 844 题，比较含退格的字符串。栈，遇到删除符号弹栈即可，其余情况压栈。
13. 第 496 题，下一个更大元素 I。答案是用栈，但是我感觉 哈希+移动窗口 会更好一点。
14. 第 503 题，下一个更大元素 II。因为会有重复元素，所以哈希的值应该是 栈或者双端队列，将相同 key 的元素压入栈，访问时弹栈。顺序遍历可以用双端对列，逆序遍历可以用栈。
15. 第 402 题，移掉K位数字。[一份不错的题解](https://leetcode-cn.com/problems/remove-k-digits/solution/wei-tu-jie-dan-diao-zhan-dai-ma-jing-jian-402-yi-d/)。顺序递增的数据，只需要删除后面，所以使用栈，保证数字顺序递增。期间，如果新来的元素小于栈顶元素，一直弹栈；弹栈次数大于给定次数后，停止弹栈，剩下的直接压栈。如果弹出次数不够，删除栈顶的元素。最后输出字符串。
16. 第 735 题，行星碰撞。按照规则压栈弹栈，注意不要忽略一些极端情况。
17. 第 1019 题，链表的下一个最大元素。依然是单调栈的应用，注意，压栈的是索引，最终结果赋值的是元素。
18. 第 1003 题，检查替换后的词是否有效。注意 `babcc` 等极端用例，弹栈注意判空。
19. 第 1081 题，不同字符的最小子序列。和 316 题相同，注意，每次遍历，不管入不入栈，次数都要减一。
20. 第 1381 题，设计一个支持增量操作的栈。双端对列。
21. 第 1249 题，移除无效的括号。压栈用的是索引，所以要注意栈的类型。
22. 第 1673 题，找出最具竞争力的子序列。单调栈的操作，和 402 类似。记录弹栈次数，如果弹栈次数不够，最终结果就继续删除。

## 单调栈

核心思路，从后往前遍历。以下一个更大元素为例：从后往前遍历，比如 1 3 4，比 1 大的是 3 而不是 4。这种结构很适合用栈。如果当前元素比栈顶元素大，那么弹栈，如果栈空了，就说明没有比他大的，就是 -1，如果比栈顶元素小，那么说明栈顶比他大，取值就是栈顶。判断结束后，压入当前元素。

### 496 题

单调栈的基础上用个哈希就好了，因为是两个数组，处理完第二个数组后，需要快速查到一个数组的结果。

### 503 题

在 496 的基础上增加了循环机制，我使用的是简单的 vector 扩容方法，算法一样，只是空间复杂度高了。
